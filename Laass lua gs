-- ØµÙ†Ø¹ Ø¨ÙˆØ§Ø³Ø·Ø© maalek_1234(Ø­Ø³Ø§Ø¨ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ)
local player = game.Players.LocalPlayer

-- Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "HiddenPlatformSystem"
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø²Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
local button = Instance.new("TextButton")
button.Name = "PlatformToggle"
button.Text = "ğŸš€ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ù†ØµØ§Øª Ø§Ù„Ù…Ø®ÙÙŠØ©"
button.Size = UDim2.new(0, 220, 0, 60)
button.Position = UDim2.new(0.5, -110, 0.5, 0)
button.AnchorPoint = Vector2.new(0.5, 0.5)
button.BackgroundColor3 = Color3.fromRGB(30, 136, 229) -- Ø£Ø²Ø±Ù‚ (Ø­Ø§Ù„Ø© Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù)
button.TextColor3 = Color3.fromRGB(255, 255, 255)
button.TextSize = 14
button.Font = Enum.Font.GothamBold
button.AutoButtonColor = true
button.Parent = screenGui

-- ØªØ­Ø³ÙŠÙ† Ø´ÙƒÙ„ Ø§Ù„Ø²Ø±
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = button

-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ù…Ø®ÙÙŠØ©
local platformTemplate = Instance.new("Part")
platformTemplate.Size = Vector3.new(15, 1, 15)
platformTemplate.Anchored = true
platformTemplate.CanCollide = true
platformTemplate.Transparency = 1 -- Ù…Ù†ØµØ© Ù…Ø®ÙÙŠØ© ØªÙ…Ø§Ù…Ù‹Ø§
platformTemplate.Name = "HIDDEN_PLATFORM_"..player.Name

-- Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
local active = false
local savedHeight = 0
local platformConnection = nil
local currentPlatform = nil

-- ÙˆØ¸ÙŠÙØ© ØªØ­Ø¯ÙŠØ« Ù…Ø¸Ù‡Ø± Ø§Ù„Ø²Ø±
local function updateButtonAppearance()
    if active then
        button.Text = "âœ… Ø§Ù„Ù…Ù†ØµØ§Øª Ø§Ù„Ù…Ø®ÙÙŠØ© Ù†Ø´Ø·Ø©"
        button.BackgroundColor3 = Color3.fromRGB(76, 175, 80) -- Ø£Ø®Ø¶Ø± (Ø­Ø§Ù„Ø© Ø§Ù„ØªØ´ØºÙŠÙ„)
    else
        button.Text = "ğŸš€ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ù†ØµØ§Øª Ø§Ù„Ù…Ø®ÙÙŠØ©"
        button.BackgroundColor3 = Color3.fromRGB(30, 136, 229) -- Ø£Ø²Ø±Ù‚ (Ø­Ø§Ù„Ø© Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù)
    end
end

-- ÙˆØ¸ÙŠÙØ© Ø¥Ù†Ø´Ø§Ø¡/ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØµØ©
local function updatePlatform()
    if currentPlatform then
        currentPlatform:Destroy()
    end
    
    local character = player.Character
    if not character then return end
    
    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then return end
    
    currentPlatform = platformTemplate:Clone()
    local position = Vector3.new(
        humanoidRootPart.Position.X,
        savedHeight,
        humanoidRootPart.Position.Z
    )
    currentPlatform.CFrame = CFrame.new(position)
    currentPlatform.Parent = workspace
end

-- ÙˆØ¸ÙŠÙØ© ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…
local function toggleSystem()
    active = not active
    
    if active then
        -- Ø­ÙØ¸ Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø¹Ù†Ø¯ Ø§Ù„ØªØ´ØºÙŠÙ„
        local character = player.Character
        if character then
            local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
            if humanoidRootPart then
                savedHeight = humanoidRootPart.Position.Y - 3
            end
        end
        
        -- Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙˆÙ„ Ù…Ù†ØµØ©
        updatePlatform()
        
        -- Ù…ØªØ§Ø¨Ø¹Ø© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹
        platformConnection = game:GetService("RunService").Heartbeat:Connect(function()
            if currentPlatform then
                local character = player.Character
                if character then
                    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
                    if humanoidRootPart then
                        currentPlatform.CFrame = CFrame.new(
                            Vector3.new(
                                humanoidRootPart.Position.X,
                                savedHeight,
                                humanoidRootPart.Position.Z
                            )
                        )
                    end
                end
            end
        end)
    else
        -- Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù†Ø¸Ø§Ù…
        if platformConnection then
            platformConnection:Disconnect()
            platformConnection = nil
        end
        
        if currentPlatform then
            currentPlatform:Destroy()
            currentPlatform = nil
        end
    end
    
    -- ØªØ­Ø¯ÙŠØ« Ù…Ø¸Ù‡Ø± Ø§Ù„Ø²Ø±
    updateButtonAppearance()
end

-- ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø²Ø±
button.MouseButton1Click:Connect(toggleSystem)

-- Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
updateButtonAppearance()
