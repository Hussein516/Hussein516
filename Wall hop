-- صنع بواسطة maalek_1234
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local button = Instance.new("Part")
button.Name = "WallHopButton"
button.Size = Vector3.new(4, 1, 4)
button.Position = Vector3.new(0, 5, 0)
button.Anchored = true
button.CanCollide = true
button.BrickColor = BrickColor.new("Bright green")
button.Shape = Enum.PartType.Cylinder
button.TopSurface = Enum.SurfaceType.Smooth
button.BottomSurface = Enum.SurfaceType.Smooth
button.Parent = workspace

local clickDetector = Instance.new("ClickDetector")
clickDetector.Parent = button

local moved = false
local wallHopEnabled = false
local wallHopHeight = 0
local connections = {}

local function moveButton(player)
    if not moved then
        moved = true
        button.BrickColor = BrickColor.new("Bright red")
        button.Position = button.Position + Vector3.new(0, 2, 0)
    end
end

local function toggleWallHop(player)
    if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then return end
    
    wallHopEnabled = not wallHopEnabled
    wallHopHeight = button.Position.Y
    
    if wallHopEnabled then
        player.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Freefall, false)
        
        local connection = RunService.Heartbeat:Connect(function()
            if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                local hrp = player.Character.HumanoidRootPart
                hrp.Position = Vector3.new(hrp.Position.X, wallHopHeight, hrp.Position.Z)
                hrp.Velocity = Vector3.new(hrp.Velocity.X, 0, hrp.Velocity.Z)
            end
        end)
        
        table.insert(connections, connection)
    else
        player.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Freefall, true)
        
        for _, conn in ipairs(connections) do
            conn:Disconnect()
        end
        connections = {}
    end
end

clickDetector.MouseClick:Connect(function(player)
    moveButton(player)
    toggleWallHop(player)
end)

game:BindToClose(function()
    button:Destroy()
    for _, conn in ipairs(connections) do
        conn:Disconnect()
    end
end)
